{% extends "base.html" %}
{% block title %}Sign up page for My Serie Platform{% endblock %}
{% block content %}
{% if user.is_authenticated %}
<br />
<br />
Your favorite series {{ user.username }}:

<!--{{html | safe}} -->

<br />
<br />
<div class="wrapper">
{% for serie in dict_series.values %}
	<div class="container">
		   	
		   		<img src={{ serie.poster_path }} alt="Avatar" class="image" >
		   	
		   	<div class="middle" >
		   		<div class="text" >		
			<a href="/serieinfo/{{ serie.id }}">
		   		{{ serie.name }}</a></div>
		   		<br />
<br />
<button id="monBoutton" onclick="remove_favorite({{serie.id}}, {{user.id}})">Remove from favourites !</button>
		   	</div>
		   </div>
<!-- 	<b><p> <a href="/serieinfo/{{ serie.id }}">{{ serie.name }}</a></p></b>
	<p>{{ serie.overview }}</p>
	<p>Next episode date :{{ serie.next_episode_date }}</p>
	<p>Next episode :{{ serie.next_episode }}</p>
	<p>Last episode date:{{ serie.last_episode_date }}</p>
	<p>Last episode :{{ serie.last_episode }}</p>
	<p><a href="/serieinfo/{{ serie.id }}"> More info</a></p> -->
	<br />





{% endfor %}
</div>
<script>
/*var element = document.getElementById("monBoutton"); // Retrouver l element dans le DOM
var event = "click"; // Evenement que l on veut detecter
// Qu'est ce que on execute lorsque "click" est généré dans mon element.
var handler = function(e) {
	console.log(e);
	// Je veux envoyer une requette http (POST)
	add_favorite({{serie.id}},{{user.id}});
};
element.addEventListener(event, handler);*/


function remove_favorite(id,user_id) {
    const Http = new XMLHttpRequest();
	const url='/search/'+id+'/remove_favorites/'+user_id;
	Http.open("GET", url);
	Http.send();

	Http.onreadystatechange = function(e) {
		console.log(Http);
		console.log(Http.responseText);
	};

}


</script>

{% else %}
Vous devez être connecté !
{% endif %}
{% endblock %}